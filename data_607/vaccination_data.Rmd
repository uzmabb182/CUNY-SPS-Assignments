---
title: "Week 5 Tidying and Transforming Data"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## R Markdown

This is an R Markdown document. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see <http://rmarkdown.rstudio.com>.

When you click the **Knit** button a document will be generated that includes both content as well as the output of any embedded R code chunks within the document. You can embed an R code chunk like this:


```{r}
library("dplyr")
library("tidyverse")
```

# Creating a data frame:
```{r}
# create the empty data frame
vaccination_df <- data.frame( age = character(),
                  unvaccinated_pop = double(),
                  unvaccinated_pop_per_100K = double(),
                  vaccinated_pop = double(),
                  vaccinated_pop_per_100K = double(),
                  unvaccinated_cases = double(),
                  vaccinated_cases = double()
)

vaccination_df

```

# Adding values into the dataframe
```{r}

vaccination_df <- vaccination_df %>% 
add_row(
  age = "under 50",
  unvaccinated_pop = 1116834,
  unvaccinated_pop_per_100K = 0.233,
  vaccinated_pop = 3501118,
  vaccinated_pop_per_100K = 0.730,
  unvaccinated_cases = 43,
  vaccinated_cases = 11
) %>% 
  add_row(
    age = "over 50",
    unvaccinated_pop = 186078,
    unvaccinated_pop_per_100K = 0.079,
    vaccinated_pop = 2133516,
    vaccinated_pop_per_100K = 0.904,
    unvaccinated_cases = 171,
    vaccinated_cases = 290
  )

vaccination_df

```

# Creating a CSV file
```{r}

write.csv(vaccination_df, "C:/Users/Uzma/CUNY-SPS-Assignments/data_607/week5/vaccination_data_analysis.csv", row.names=FALSE)


```

# Reading from a CSV file

```{r}
vaccine_df <- read_csv( file = "C:/Users/Uzma/CUNY-SPS-Assignments/data_607/week5/vaccination_data_analysis.csv")
```

```{r}
glimpse(vaccine_df)
```

```{r}
vaccine_df
```

```{r}

# afficacy vs. severe disease = 1 - (% fully vaxed severe cases per 100K / % not vaxed severe cases per 100K)

# (1) Do you have enough information to calculate the total population?  What does this total population represent?						
# (2) Calculate the Efficacy vs. Disease; Explain your results.						
# (3) From your calculation of efficacy vs. disease, are you able to compare the rate of severe cases in unvaccinated 
# individuals to that in vaccinated individuals?						
						
# Population	7,155,090	Population includes Israelis age 12 and up; also includes partially vaxed individuals				
						
#	<50: 3.9 / 0.3	13.0	{ How should these numbers be intepreted?			
#	>50: 91.9 / 13.6	6.8				



```

```{r}
total_population <- select(vaccine_df, "age", "unvaccinated_pop", "vaccinated_pop") 

total_population
```

```{r}

# (1) Do you have enough information to calculate the total population?  What does this total population represent?	

total_population <-
  mutate(total_population,
  total_pop = (unvaccinated_pop + vaccinated_pop)
  )

```

```{r}
total_population
```

```{r}
sum(total_population[, 'total_pop'])
```

```{r}

```


